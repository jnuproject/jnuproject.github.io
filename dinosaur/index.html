<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì •ì±…ì„ ë¨¹ëŠ” ê³µë£¡ ğŸ¦–</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
:root {
  --bg:#f4f4f4;
  --ground:#d0d0d0;
  --dino:#333;
  --obstacle:#000;
  --coin-communication:#ff7676;
  --coin-welfare:#f5cd06;
  --coin-education:#3da5ff;
  --coin-student:#36b37e;
  --coin-jeju:#ff9d00;
  --coin-human:#b86bff;
  --coin-safety:#ff5ab3;
  --coin-campus:#6ad69e;
  --coin-culture:#ffa347;
  --coin-response:#5ec7f7;
  --coin-glocal:#6b7cff;
  --coin-region:#ffb300;
  --coin-partnership:#8bc34a;
}

*{box-sizing:border-box;}
body{
  margin:0;
  background:linear-gradient(180deg,#ffffff 0%,#e8edf3 100%);
  font-family:"Pretendard","Noto Sans KR",system-ui,sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  gap:1rem;
  padding:1rem;
}
h1{
  margin:0;
  font-size:1.6rem;
  color:#333;
}
#gameWrapper{
  position:relative;
  width:min(1200px, 100%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0.5rem;
}
#gameCanvas{
  background:var(--bg);
  width:100%;
  max-width:1200px;
  height:auto;
  border:1px solid rgba(0,0,0,0.05);
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,0.06);
}
#hud {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 0.6rem;
  justify-items: center;
  align-items: center;
  width: 100%;
  max-width: 1200px;
  margin-top: 0.5rem;
}

@media (max-width: 500px) {
  #hud {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 600px){
  body{
    padding:0.6rem;
    gap:0.7rem;
  }
  #gameWrapper{
    gap:0.4rem;
  }
  #hud{
    gap:0.4rem;
  }
}

.counter {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  background: white;
  padding: 0.4rem 0.8rem;
  border-radius: 999px;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.04);
  width: 100%;
  max-width: 180px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  font-size: clamp(0.6rem, 2vw, 0.9rem);
}

.dot {
  width: clamp(10px, 1.6vw, 14px);
  height: clamp(10px, 1.6vw, 14px);
  border-radius: 50%;
  flex-shrink: 0;
}

.modal, .overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  backdrop-filter:blur(3px);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:999;
}
.hidden{display:none !important;}
.modal-box, .intro-box{
  background:white;
  width:min(420px, 95vw);
  border-radius:18px;
  padding:1.5rem 1.5rem 1.55rem;
  box-shadow:0 20px 40px rgba(0,0,0,0.12);
  text-align:center;
  animation:pop 0.15s ease-out;
}
@keyframes pop{from{transform:scale(.9); opacity:0;}to{transform:scale(1); opacity:1;}}
.policy-list{margin:1rem 0;text-align:left;list-style:disc; line-height:1.4;}
.btn{
  border:none;background:#111827;color:white;padding:.55rem 1.1rem;
  border-radius:999px;font-weight:600;cursor:pointer;
}
.btn:active{transform:translateY(1px);}
#gameOverBox{
  position:absolute;inset:0;display:flex;justify-content:center;align-items:center;
  background:rgba(244,244,244,0.8);backdrop-filter:blur(2px);
  flex-direction:column;gap:0.6rem;z-index:20;border-radius:14px;
}
#gameOverBox.hidden{display:none;}
#gameOverBox h2{margin:0;}
#hint{font-size:0.7rem;color:#888;}

#footerBanner {
  width: 100%;
  text-align: center;
  padding: 0.8rem 1rem;
  background: linear-gradient(90deg, #00bfa5, #0097a7);
  color: white;
  font-weight: 600;
  font-size: clamp(0.9rem, 2vw, 1.1rem);
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  box-shadow: 0 -3px 10px rgba(0,0,0,0.1);
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: 1000;
}
  </style>
</head>
<body>
  
  <h1>ì •ì±…ì„ ë¨¹ëŠ” ê³µë£¡ ğŸ¦–</h1>
  <div id="gameWrapper">
    <canvas id="gameCanvas" width="1200" height="400"></canvas>

    <div id="hud">
      <div class="counter" data-type="communication"><span class="dot" style="background:var(--coin-communication)"></span>ì†Œí†µ: <span id="communication">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="welfare"><span class="dot" style="background:var(--coin-welfare)"></span>ë³µì§€: <span id="welfare">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="education"><span class="dot" style="background:var(--coin-education)"></span>êµìœ¡ì·¨ì—…: <span id="education">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="student"><span class="dot" style="background:var(--coin-student)"></span>í•™ìƒìì¹˜: <span id="student">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="jeju"><span class="dot" style="background:var(--coin-jeju)"></span>ì œì£¼4Â·3: <span id="jeju">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="human"><span class="dot" style="background:var(--coin-human)"></span>ì¸ê¶Œ: <span id="human">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="safety"><span class="dot" style="background:var(--coin-safety)"></span>ì‹œì„¤ì•ˆì „: <span id="safety">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="campus"><span class="dot" style="background:var(--coin-campus)"></span>ê·¸ë¦°ìº í¼ìŠ¤: <span id="campus">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="culture"><span class="dot" style="background:var(--coin-culture)"></span>ë¬¸í™”ì°¸ì—¬: <span id="culture">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="response"><span class="dot" style="background:var(--coin-response)"></span>í˜„ì•ˆëŒ€ì‘: <span id="response">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="glocal"><span class="dot" style="background:var(--coin-glocal)"></span>ê¸€ë¡œì»¬ëŒ€í•™30: <span id="glocal">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="region"><span class="dot" style="background:var(--coin-region)"></span>ì§€ì—­ìƒìƒ: <span id="region">0</span>/<span class="goal">2</span></div>
      <div class="counter" data-type="partnership"><span class="dot" style="background:var(--coin-partnership)"></span>ì œíœ´: <span id="partnership">0</span>/<span class="goal">2</span></div>
      <div class="counter scoreBox">ì ìˆ˜: <span id="score">0</span></div>
    </div>
    <div id="hint">PC: ìŠ¤í˜ì´ìŠ¤/â†‘ / ëª¨ë°”ì¼: í™”ë©´ í„°ì¹˜</div>

    <div id="gameOverBox" class="hidden">
      <h2>ê²Œì„ ì˜¤ë²„ ğŸ˜…</h2>
      <p>ë‹¤ì‹œ ë‹¬ë¦´ë˜?</p>
      <button class="btn" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
  </div>

  <div id="policyModal" class="modal hidden">
    <div class="modal-box">
      <h2 id="policyTitle">ì •ì±…</h2>
      <ul id="policyList" class="policy-list"></ul>
      <button class="btn" id="closeModal">ë‹¤ì‹œ ë‹¬ë¦¬ê¸° ğŸ¦–</button>
    </div>
  </div>

  <div id="winModal" class="modal hidden">
    <div class="modal-box">
      <h2>ğŸ‰ ëª¨ë“  ì •ì±…ì„ ëª¨ì•˜ì–´ìš”!</h2>
      <p>ì´ì œ ëª¨ë“  ì •ì±…ì„ ì™„ì„±í–ˆì–´ìš”! ë©‹ì ¸ìš” ğŸ¦–</p>
      <button class="btn" onclick="location.reload()">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
  </div>

  <div id="introOverlay" class="overlay">
    <div class="intro-box">
      <h2>ì •ì±…ì„ ë¨¹ëŠ” ê³µë£¡ ğŸ¦–</h2>
      <p>ìŠ¤í˜ì´ìŠ¤ë°”ë‚˜ í™”ë©´ í„°ì¹˜ë¡œ ì í”„í•˜ë©° ì¥ì• ë¬¼ì„ í”¼í•´ ë‹¬ë ¤ë´!<br><br>
      <b>ê° ìƒ‰ìƒ ì½”ì¸ì„ 2ê°œ ëª¨ìœ¼ë©´</b> í•´ë‹¹ ë¶„ì•¼ì˜ ì •ì±…ì„ í™•ì¸í•  ìˆ˜ ìˆì–´.<br><br>
      ëª¨ë“  ì •ì±…ì„ ëª¨ìœ¼ë©´ ìŠ¹ë¦¬í•´!</p>
      <button class="btn" id="startGame">ì‹œì‘í•˜ê¸° ğŸš€</button>
    </div>
  </div>
  <div id="footerBanner">ì œì£¼ëŒ€í•™êµ 58ëŒ€ DREAM ì´í•™ìƒíšŒ ì„ ê±°ìš´ë™ë³¸ë¶€</div>
<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");

const calculateCanvasSize=()=>{
  const vw=window.innerWidth;
  if(vw<=480)return{width:650,height:300};
  if(vw<=768)return{width:900,height:340};
  return{width:1200,height:400};
};

const applyInitialCanvasSize=()=>{
  const {width,height}=calculateCanvasSize();
  canvas.width=width;
  canvas.height=height;
  return {width,height};
};

const initialSize=applyInitialCanvasSize();
let W=initialSize.width,H=initialSize.height;
let groundY=H-40;

const dino={x:60,y:groundY-40,w:38,h:40,vy:0,gravity:0.7,jumpPower:-12,onGround:true};
const obstacles=[],coins=[];
let gameSpeed=6,spawnObstacleTimer=0,spawnCoinTimer=0,score=0;
let isGameOver=false,paused=true;

const handleCanvasResize=()=>{
  const {width,height}=calculateCanvasSize();
  if(width===canvas.width&&height===canvas.height)return;
  canvas.width=width;
  canvas.height=height;
  W=width;
  H=height;
  groundY=H-40;
  if(dino.onGround){
    dino.y=groundY-dino.h;
  }else{
    dino.y=Math.min(dino.y,groundY-dino.h);
  }
  obstacles.length=0;
  coins.length=0;
};

window.addEventListener("resize",handleCanvasResize);

const coinTypes=["communication","welfare","education","student","jeju","human","safety","campus","culture","response","glocal","region","partnership"];
const coinsCollected={};coinTypes.forEach(k=>coinsCollected[k]=0);
let activeCoinTypes=[...coinTypes];

const policyNames={
  communication:"ì†Œí†µ",welfare:"ë³µì§€",education:"êµìœ¡ì·¨ì—…",student:"í•™ìƒìì¹˜",jeju:"ì œì£¼4Â·3",human:"ì¸ê¶Œ",
  safety:"ì‹œì„¤ì•ˆì „",campus:"ê·¸ë¦°ìº í¼ìŠ¤",culture:"ë¬¸í™”ì°¸ì—¬",response:"í˜„ì•ˆëŒ€ì‘",glocal:"ê¸€ë¡œì»¬ëŒ€í•™30",
  region:"ì§€ì—­ìƒìƒ",partnership:"ì œíœ´"
};
const policyData={
  communication:["ê³µì•½ RE:dream", "ë‚´ ì¹œêµ¬ ë“œë¦¬ë¯¸", "JNU CONNECT : ì œì£¼ëŒ€í•™êµë¥¼ ì‡ëŠ” ì†Œí†µì˜ ì‹œì‘"],welfare:["DREAM ì¥í•™ê¸ˆ", "í•™ìƒì¦ ê¸°ë°˜ ë””ì§€í„¸ í†µí•© ë³µì§€ ì‹œìŠ¤í…œ", "JNU-PASS", "DREAM ì²œì›ìƒµ", "ì •í›„ë¬¸ ê±°ì£¼ í•™ìš°ë“¤ì„ ìœ„í•œ ì›”ì„¸ì§€ì› ì‚¬ì—…"],education:["ìˆ˜ê°•ì‹ ì²­ ëŒ€ê¸° ìˆœë²ˆì œ", "Dream ìœµí•© íŠ¸ë™ ê°€ì´ë“œ", "JNU Career Camp"],
  student:["ì˜ˆì‚° ì˜ê²° í•™ìƒ ì°¸ì—¬ì œ", "JNU í†µí•© ê°ì‚¬ ì²´ê³„ ê°œì„ "],jeju:["ì „êµ­ í•™ìƒ ì œì£¼4Â·3 í¬ëŸ¼ ê°œìµœ"],human:["ë¶ˆë²• ì¹´ë©”ë¼ í™•ì¸ êµ¬ì—­ í™•ëŒ€", "ìƒˆê° í™”ì¬ê²½ë³´ê¸° ì„¤ì¹˜", "ì˜ˆë¹„êµ° 3ê¶Œ ë³´ì¥", "Dream On", "Join Us"],
  safety:["í•™ìƒíšŒê´€ ëƒ‰ë‚œë°© ì‹œìŠ¤í…œ í™•ë¦½", "êµì–‘ê°•ì˜ë™ í”„ë¦°í„° ì„¤ì¹˜", "DOR+MUNITY", "DORM LIFE+", "ì •í›„ë¬¸ í™˜ê²½ ê°œì„ ", "ì£¼ì°¨ ì‚¬ì „ ì •ì‚° ì‹œìŠ¤í…œ ë„ì…"],campus:["ì¹œí™˜ê²½ í—ˆë¸Œ ìº í¼ìŠ¤ ì¡°ì„±", "Green JNU Challenge"],culture:["ê¿ˆê¾¸ëŠ” ì•„ë¼ëŒ€ë™ì œ", "ëª¨ë‘ì˜ ì¶œë²”ì‹", "ë“œë¦¼ í¬ì¸íŠ¸ì œ"],
  response:["í˜„ì•ˆëŒ€ì‘êµ­ ì‹ ì„¤", "ì‚¬ê³ ëŒ€ì±…ìœ„ì›íšŒ ë° ëŒ€ì‘ ë§¤ë‰´ì–¼ ì •ë¦½", "í•™ì‚¬ì œë„ ìˆ˜ìš” ì¡°ì‚¬ ë° ì œë„ ê°œì„ "],glocal:["ì œì£¼ëŒ€í•™êµ í•™ìƒíšŒê´€ ë¦¬ë‰´ì–¼ í”„ë¡œì íŠ¸", "ê¸€ë¡œì»¬ í•™ì‚¬ í˜ì‹  ì°¸ì—¬ í”Œë«í¼ êµ¬ì¶•"],region:["ëŒ€í•™êµ êµë¥˜ì „", "ì œì£¼ìƒìƒ ê·¸ë¦°ì˜¤ë”"],
  partnership:["ì œíœ´ ë°•ëŒíšŒ", "ì œíœ´ ì†Œí†µ í”Œë«í¼"]
};

const refs={};coinTypes.forEach(id=>refs[id]=document.getElementById(id));
const policyModal=document.getElementById("policyModal");
const policyTitle=document.getElementById("policyTitle");
const policyList=document.getElementById("policyList");
const closeModalBtn=document.getElementById("closeModal");
const gameOverBox=document.getElementById("gameOverBox");
const restartBtn=document.getElementById("restartBtn");
const scoreEl=document.getElementById("score");
const introOverlay=document.getElementById("introOverlay");
const startGameBtn=document.getElementById("startGame");
const winModal=document.getElementById("winModal");

const rand=(min,max)=>Math.random()*(max-min)+min;

startGameBtn.onclick=()=>{paused=false;introOverlay.classList.add("hidden");};

function jump(){if(paused||isGameOver)return;if(dino.onGround){dino.vy=dino.jumpPower;dino.onGround=false;}}
document.addEventListener("keydown",e=>{if(["Space","ArrowUp"].includes(e.code)){e.preventDefault();jump();}});
document.body.addEventListener("touchstart", e => {
  if (e.target.closest('.btn') || e.target.closest('.modal') || e.target.closest('.intro-box')) return;
  jump();
}, { passive: true });


function spawnObstacle(){const width=Math.random()<0.5?22:28;const height=rand(35,60);obstacles.push({x:W+20,y:groundY-height,w:width,h:height});}

function spawnCoin(){
  if(activeCoinTypes.length===0)return;
  const type=activeCoinTypes[Math.floor(Math.random()*activeCoinTypes.length)];
  const color=getComputedStyle(document.documentElement).getPropertyValue("--coin-"+type);
  const heightAbove=rand(100,130);
  coins.push({x:W+40,y:groundY-heightAbove,r:12,type,color:color.trim()});
}

function rectRectCollision(a,b){return a.x<b.x+b.w&&a.x+a.w>b.x&&a.y<b.y+b.h&&a.y+a.h>b.y;}
function dinoCoinCollision(coin){const box={x:coin.x-coin.r,y:coin.y-coin.r,w:coin.r*2,h:coin.r*2};return rectRectCollision(dino,box);}
function updateCoinHud(){coinTypes.forEach(k=>{if(refs[k])refs[k].textContent=coinsCollected[k];});scoreEl.textContent=score;}

function showPolicyModal(type){
  paused=true;
  policyTitle.textContent=policyNames[type];
  policyList.innerHTML=policyData[type].map(p=>`<li>${p}</li>`).join("");
  policyModal.classList.remove("hidden");
}

function removeCounterBox(type){
  const box=document.querySelector(`.counter[data-type="${type}"]`);
  if(box)box.remove();
}

function checkWinCondition(){
  if(activeCoinTypes.length===0){
    paused=true;
    winModal.classList.remove("hidden");
  }
}

closeModalBtn.onclick=()=>{
  policyModal.classList.add("hidden");
  obstacles.length=0;coins.length=0;
  removeCounterBox(currentCategory);
  activeCoinTypes=activeCoinTypes.filter(t=>t!==currentCategory);
  coinsCollected[currentCategory]=0;
  updateCoinHud();
  paused=false;
  checkWinCondition();
};

function gameOver(){isGameOver=true;gameOverBox.classList.remove("hidden");}
restartBtn.onclick=()=>{
  isGameOver=false;paused=false;gameOverBox.classList.add("hidden");
  obstacles.length=0;coins.length=0;score=0;
  for(const k in coinsCollected)coinsCollected[k]=0;
  activeCoinTypes=[...coinTypes];
  document.getElementById("hud").innerHTML=document.querySelectorAll('.counter[data-type]').length?document.getElementById("hud").innerHTML:"";
  location.reload();
};

let currentCategory=null;
function update(){
  if(paused||isGameOver)return;
  score++;
  dino.vy+=dino.gravity;dino.y+=dino.vy;
  if(dino.y+dino.h>=groundY){dino.y=groundY-dino.h;dino.vy=0;dino.onGround=true;}

  spawnObstacleTimer--;
  if(spawnObstacleTimer<=0){spawnObstacle();spawnObstacleTimer=Math.floor(rand(90,150));}
  spawnCoinTimer--;
  if(spawnCoinTimer<=0){spawnCoin();spawnCoinTimer=Math.floor(rand(130,200));}

  for(let i=obstacles.length-1;i>=0;i--){
    const ob=obstacles[i];
    ob.x-=gameSpeed;
    if(ob.x+ob.w<0)obstacles.splice(i,1);
    else if(rectRectCollision(dino,ob))gameOver();
  }

  for(let i=coins.length-1;i>=0;i--){
    const coin=coins[i];
    coin.x-=gameSpeed;
    if(coin.x+coin.r<0)coins.splice(i,1);
    else if(dinoCoinCollision(coin)){
      coinsCollected[coin.type]++;
      updateCoinHud();
      const current=coinsCollected[coin.type];
      coins.splice(i,1);
      if(current>=2){
        currentCategory=coin.type;
        showPolicyModal(coin.type);
      }
    }
  }
  updateCoinHud();
}

function draw(){
  ctx.clearRect(0,0,W,H);
  ctx.fillStyle="#fdfdfd";ctx.fillRect(0,0,W,H);
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--ground");
  ctx.fillRect(0,groundY,W,H-groundY);
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--dino");
  ctx.fillRect(dino.x,dino.y,dino.w,dino.h);
  ctx.fillStyle="#fff";ctx.fillRect(dino.x+dino.w-12,dino.y+8,6,6);
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--obstacle");
  obstacles.forEach(ob=>ctx.fillRect(ob.x,ob.y,ob.w,ob.h));
  coins.forEach(c=>{
    ctx.beginPath();ctx.fillStyle=c.color;ctx.arc(c.x,c.y,c.r,0,Math.PI*2);ctx.fill();
    ctx.fillStyle="rgba(255,255,255,0.85)";
    ctx.font="10px sans-serif";ctx.textAlign="center";ctx.textBaseline="middle";
    const short={communication:"ì†Œ",welfare:"ë³µ",education:"êµ",student:"í•™",jeju:"ì œ",human:"ì¸",safety:"ì•ˆ",campus:"ìº ",culture:"ë¬¸",response:"í˜„",glocal:"ê¸€",region:"ì§€",partnership:"ì œ"}[c.type];
    ctx.fillText(short,c.x,c.y+0.5);
  });
  ctx.fillStyle="#555";ctx.font="13px sans-serif";ctx.textAlign="right";
  ctx.fillText("Score: "+score,W-10,20);
}

function loop(){update();draw();requestAnimationFrame(loop);}
spawnObstacleTimer=60;spawnCoinTimer=90;loop();
</script>
</body>
</html>
